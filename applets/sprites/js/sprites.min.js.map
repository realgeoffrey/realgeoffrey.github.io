{"version":3,"sources":["sprites.js"],"names":["handleFiles","files","callback","i","length","file","type","match","reader","FileReader","onload","e","console","log","FileReaderOnload","readAsDataURL","dt","dd","img_container","document","createElement","img","li","meta","metas","src","target","result","push","text","value","name","width","height","formateFileSize","total","getFileType","formatDate","lastModifiedDate","forEach","v","innerHTML","appendChild","classList","add","sprites","getFileName","allname","split","pop","join","drawSprites","padding","workplace_width","workplace_height","x","y","workplace","workplace_ctx","drawImage","generateCss","filename","class_name","cssText","background_size_num","background_size","checked","class_names","size","K","M","G","Math","floor","ceil","sizes","date","fmt","o","M+","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","test","replace","RegExp","$1","getFullYear","substr","k","image_list","getElementById","settings","submit_btn","dropbox","css_code","sprites_img","result_pop","getContext","addEventListener","remove","stopPropagation","preventDefault","style","display","dataTransfer","parseInt","data","toDataURL","querySelector","evt","createEvent","initEvent","download","href","dispatchEvent","types","image/gif","image/png","image/jpeg"],"mappings":"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","file":"sprites.min.js","sourcesContent":["var image_list = document.getElementById(\"image_list\"),\n    settings = document.getElementById(\"settings\"),\n    submit_btn = document.getElementById(\"submit_btn\"),\n    dropbox = document.getElementById(\"dropbox\"),\n    workplace = document.getElementById(\"workplace\"),\n    workplace_width = 0,\n    workplace_height = 0,\n    background_size = document.getElementById(\"background_size\"),\n    css_code = document.getElementById(\"css_code\"),\n    sprites_img = document.getElementById(\"sprites_img\"),\n    result_pop = document.getElementById(\"result_pop\"),\n    workplace_ctx = workplace.getContext(\"2d\"),\n    sprites = [];\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n    document.addEventListener(\"dragenter\", function () {\n        dropbox.classList.add(\"dragFile\");\n    }, false);\n\n    document.addEventListener(\"dragleave\", function () {\n        dropbox.classList.remove(\"dragFile\");\n    }, false);\n\n    dropbox.addEventListener(\"dragenter\", function () {\n        dropbox.classList.add(\"dragenter\");\n    }, false);\n\n    dropbox.addEventListener(\"dragleave\", function () {\n        dropbox.classList.remove(\"dragenter\");\n    }, false);\n\n    dropbox.addEventListener(\"dragenter\", function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n    }, false);\n\n    dropbox.addEventListener(\"dragover\", function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n    }, false);\n\n    dropbox.addEventListener(\"drop\", function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        console.log(e);\n        //dropbox.style.display = \"none\";\n        settings.style.display = \"block\";\n\n        handleFiles(e.dataTransfer.files, function (li) {\n            image_list.appendChild(li);\n        });\n    }, false);\n\n    submit_btn.addEventListener(\"click\", function () {\n        var type = document.getElementById(\"type\").value,\n            padding = parseInt(document.getElementById(\"padding\").value),\n            filename = document.getElementById(\"filename\").value;\n\n        console.log(sprites);\n        drawSprites(type, padding);\n        css_code.value = generateCss(type, filename);\n\n        var data = workplace.toDataURL();\n\n        sprites_img.querySelector('img').src = data;\n        result_pop.style.display = 'block';\n        settings.style.display = \"none\";\n        dropbox.style.display = \"none\";\n        var evt = document.createEvent(\"HTMLEvents\");\n        evt.initEvent(\"click\", false, false);\n        sprites_img.download = filename;\n        sprites_img.href = data;\n        sprites_img.dispatchEvent(evt);\n    }, false);\n});\n\nfunction handleFiles(files, callback) {\n    for (var i = 0; i < files.length; i++) {\n        var file = files[i];\n        if (!file.type.match(/image*/)) {\n            continue;\n        }\n\n        var reader = new FileReader();\n        reader.onload = (function (file) {\n            return function (e) {\n                console.log(file);\n                FileReaderOnload(e, file, callback);\n            };\n        }(file));\n\n        reader.readAsDataURL(file);\n    }\n}\n\nfunction FileReaderOnload(e, file, callback) {\n    var img_container = document.createElement(\"div\"),\n        img = document.createElement(\"img\"),\n        li = document.createElement(\"li\"),\n        meta = document.createElement(\"dl\"),\n        metas = [],\n        dt, dd;\n\n    img.src = e.target.result;\n    //img.file = file;\n\n    //console.log(e,file);\n    metas.push({\n        \"text\": \"文件名称：\",\n        \"value\": file.name\n    });\n\n    metas.push({\n        \"text\": \"文件大小：\",\n        \"value\": img.width + \"px X \" + img.height + \"px\"\n    });\n\n    metas.push({\n        \"text\": \"文件尺寸：\",\n        \"value\": formateFileSize(e.total)\n    });\n\n    metas.push({\n        \"text\": \"文件类型：\",\n        \"value\": getFileType(file.type)\n    });\n\n    metas.push({\n        \"text\": \"上次修改时间：\",\n        \"value\": formatDate(file.lastModifiedDate, \"yyyy-MM-dd hh:mm:ss\")\n    });\n\n    metas.forEach(function (v) {\n        dt = document.createElement(\"dt\");\n        dd = document.createElement(\"dd\");\n\n        dt.innerHTML = v.text;\n        dd.innerHTML = v.value;\n        meta.appendChild(dt);\n        meta.appendChild(dd);\n    });\n\n    img_container.classList.add(\"img_container\");\n    img_container.appendChild(img);\n    li.appendChild(img_container);\n    //li.appendChild(meta);\n    callback(li, e, file);\n\n    sprites.push({img: img, file: file});\n}\n\nfunction getFileName(allname) {\n    allname = allname.split(\".\");\n    allname.pop();\n    allname.join(\".\");\n    return allname;\n}\n\nfunction drawSprites(type, padding) {\n    var i;\n    workplace_width = 0;\n    workplace_height = 0;\n\n    if (type == \"v_l\") {\n        for (i = 0; i < sprites.length; i++) {\n            if (workplace_width < sprites[i].img.width) {\n                workplace_width = sprites[i].img.width;\n            }\n        }\n\n        for (i = 0; i < sprites.length; i++) {\n            sprites[i].x = 0;\n            if (i == 0) {\n                sprites[i].y = workplace_height;\n                workplace_height += sprites[i].img.height;\n            } else {\n                sprites[i].y = workplace_height + padding;\n                workplace_height += sprites[i].img.height + padding;\n            }\n        }\n    } else if (type == \"v_r\") {\n        for (i = 0; i < sprites.length; i++) {\n            if (workplace_width < sprites[i].img.width) {\n                workplace_width = sprites[i].img.width;\n            }\n        }\n\n        for (i = 0; i < sprites.length; i++) {\n            sprites[i].x = workplace_width - sprites[i].img.width;\n\n            if (i == 0) {\n                sprites[i].y = workplace_height;\n                workplace_height += sprites[i].img.height;\n            } else {\n                sprites[i].y = workplace_height + padding;\n                workplace_height += sprites[i].img.height + padding;\n            }\n\n        }\n    } else if (type == \"h_t\") {\n        for (i = 0; i < sprites.length; i++) {\n            if (workplace_height < sprites[i].img.height) {\n                workplace_height = sprites[i].img.height;\n            }\n        }\n\n        for (i = 0; i < sprites.length; i++) {\n            sprites[i].y = 0;\n            if (i == 0) {\n                sprites[i].x = workplace_width;\n                workplace_width += sprites[i].img.width;\n            } else {\n                sprites[i].x = workplace_width + padding;\n                workplace_width += sprites[i].img.width + padding;\n            }\n\n        }\n    } else if (type == \"h_b\") {\n        for (i = 0; i < sprites.length; i++) {\n            if (workplace_height < sprites[i].img.height) {\n                workplace_height = sprites[i].img.height;\n            }\n        }\n\n        for (i = 0; i < sprites.length; i++) {\n            sprites[i].y = workplace_height - sprites[i].img.height;\n            if (i == 0) {\n                sprites[i].x = workplace_width;\n                workplace_width += sprites[i].img.width;\n            } else {\n                sprites[i].x = workplace_width + padding;\n                workplace_width += sprites[i].img.width + padding;\n            }\n\n        }\n    }\n\n    workplace.width = workplace_width;\n    workplace.height = workplace_height;\n\n    for (i = 0; i < sprites.length; i++) {\n        workplace_ctx.drawImage(sprites[i].img, sprites[i].x, sprites[i].y, sprites[i].img.width, sprites[i].img.height);\n    }\n\n}\n\n\nfunction generateCss(type, filename) {\n    var cssText = \"\",\n        //            commonCssText,\n        background_size_num = background_size.checked ? 2 : 1,\n        class_names = [],\n        class_name, i;\n\n    console.log(background_size.checked, background_size_num);\n\n    if (type == \"v_l\") {\n        for (i = 0; i < sprites.length; i++) {\n            class_name = '.' + getFileName(sprites[i].file.name);\n            class_names.push(class_name);\n            cssText += class_name + '{background-position: 0 ' + (-sprites[i].y / background_size_num) + 'px; width: ' + (sprites[i].img.width / background_size_num) + 'px; height: ' + (sprites[i].img.height / background_size_num) + 'px;}\\n';\n        }\n    } else if (type == \"v_r\") {\n        for (i = 0; i < sprites.length; i++) {\n            class_name = '.' + getFileName(sprites[i].file.name);\n            class_names.push(class_name);\n            cssText += class_name + '{background-position: 100% ' + (-sprites[i].y / background_size_num) + 'px; width: ' + (sprites[i].img.width / background_size_num) + 'px; height: ' + (sprites[i].img.height / background_size_num) + 'px;}\\n';\n        }\n    } else if (type == \"h_t\") {\n        for (i = 0; i < sprites.length; i++) {\n            class_name = '.' + getFileName(sprites[i].file.name);\n            class_names.push(class_name);\n            cssText += class_name + '{background-position: ' + (-sprites[i].x / background_size_num) + 'px 0; width: ' + (sprites[i].img.width / background_size_num) + 'px; height: ' + (sprites[i].img.height / background_size_num) + 'px;}\\n';\n        }\n    } else if (type == \"h_b\") {\n        for (i = 0; i < sprites.length; i++) {\n            class_name = '.' + getFileName(sprites[i].file.name);\n            class_names.push(class_name);\n            cssText += class_name + '{background-position: ' + (-sprites[i].x / background_size_num) + 'px 100%; width: ' + (sprites[i].img.width / background_size_num) + 'px; height: ' + (sprites[i].img.height / background_size_num) + 'px;}\\n';\n        }\n    }\n\n    //        commonCssText = class_names.join(\",\");\n    //        commonCssText += '{background:url(' + filename + ') no-repeat; ' + ((background_size_num != 1) ? 'background-size:' + (workplace_width / background_size_num) + 'px ' + (workplace_height / background_size_num) + 'px; ' : '') + 'display:inline-block}';\n\n    //        cssText = commonCssText + '\\n' + cssText;\n    return cssText;\n}\n\nfunction formateFileSize(size) {\n    var unit = 1024,\n        K, M, G;\n\n    //console.log(size);\n    G = Math.floor(size / unit / unit / unit);\n    size -= G * unit;\n    M = Math.floor(size / unit / unit);\n    size -= M * unit;\n    K = Math.ceil(size / unit);\n\n    var sizes = [];\n    G > 0 && sizes.push(G + \"G\");\n    M > 0 && sizes.push(M + \"M\");\n    K > 0 && sizes.push(K + \"K\");\n\n    //console.log(sizes,G,M,K);\n    return sizes.join(\"\");\n}\n\n\nvar getFileType = (function () {\n    var types = {\n        \"image/gif\": \"GIF\",\n        \"image/png\": \"PNG\",\n        \"image/jpeg\": \"JPG\"\n    };\n\n    return function (type) {\n        return types[type];\n    };\n})();\n\nfunction formatDate(date, fmt) {\n    var o = {\n        \"M+\": date.getMonth() + 1,\n        \"d+\": date.getDate(),\n        \"h+\": date.getHours(),\n        \"m+\": date.getMinutes(),\n        \"s+\": date.getSeconds()\n    };\n\n    if (/(y+)/.test(fmt)) {\n        fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    }\n    for (var k in o) {\n        if (new RegExp(\"(\" + k + \")\").test(fmt)) {\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n        }\n    }\n\n    return fmt;\n}"]}